{"version":3,"file":"validate-is-my-json-valid.js","names":["isMyJsonValid","newRxError","wrappedValidateStorageFactory","getValidator","schema","validator","docData","isValid","errors","document","wrappedValidateIsMyJsonValidStorage"],"sources":["../../../src/plugins/validate-is-my-json-valid.ts"],"sourcesContent":["/**\n * this plugin validates documents before they can be inserted into the RxCollection.\n * It's using is-my-json-valid as jsonschema-validator\n * @link https://github.com/mafintosh/is-my-json-valid\n */\nimport isMyJsonValid from 'is-my-json-valid';\nimport {\n    newRxError\n} from '../rx-error';\nimport type {\n    RxJsonSchema\n} from '../types';\nimport { wrappedValidateStorageFactory } from '../plugin-helpers';\n\n\nexport function getValidator(\n    schema: RxJsonSchema<any>\n) {\n    const validator = isMyJsonValid(schema as any);\n    return (docData: any) => {\n        const isValid = validator(docData);\n        if (!isValid) {\n            throw newRxError('VD2', {\n                errors: validator.errors,\n                document: docData,\n                schema\n            });\n        }\n    };\n}\n\nexport const wrappedValidateIsMyJsonValidStorage = wrappedValidateStorageFactory(\n    getValidator,\n    'is-my-json-valid'\n);\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAOA,aAAa,MAAM,kBAAkB;AAC5C,SACIC,UAAU,QACP,aAAa;AAIpB,SAASC,6BAA6B,QAAQ,mBAAmB;AAGjE,OAAO,SAASC,YAAY,CACxBC,MAAyB,EAC3B;EACE,IAAMC,SAAS,GAAGL,aAAa,CAACI,MAAM,CAAQ;EAC9C,OAAO,UAACE,OAAY,EAAK;IACrB,IAAMC,OAAO,GAAGF,SAAS,CAACC,OAAO,CAAC;IAClC,IAAI,CAACC,OAAO,EAAE;MACV,MAAMN,UAAU,CAAC,KAAK,EAAE;QACpBO,MAAM,EAAEH,SAAS,CAACG,MAAM;QACxBC,QAAQ,EAAEH,OAAO;QACjBF,MAAM,EAANA;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;AACL;AAEA,OAAO,IAAMM,mCAAmC,GAAGR,6BAA6B,CAC5EC,YAAY,EACZ,kBAAkB,CACrB"}
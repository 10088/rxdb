{"version":3,"sources":["../../../../src/plugins/pouchdb/pouch-db.ts"],"names":["PouchDBCore","PouchDBFind","newRxError","newRxTypeError","addCustomEventsPluginToPouch","addPouchPlugin","isLevelDown","adapter","super_","isInstanceOf","obj","plugin","rxdb","PouchDB"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,WAAP,MAAwB,cAAxB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,cAAxB;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA,SACIC,UADJ,EAEIC,cAFJ,QAGO,gBAHP;AAIA,SAASC,4BAAT,QAA6C,wBAA7C;AAEAC,cAAc,CAACJ,WAAD,CAAd;AACAG,4BAA4B;AAG5B;AACA;AACA;AACA;;AACA,OAAO,SAASE,WAAT,CAAqBC,OAArB,EAAmC;AACtC,MAAI,CAACA,OAAD,IAAY,OAAOA,OAAO,CAACC,MAAf,KAA0B,UAA1C,EAAsD;AAClD,UAAMN,UAAU,CAAC,KAAD,EAAQ;AACpBK,MAAAA,OAAO,EAAPA;AADoB,KAAR,CAAhB;AAGH;AACJ;AAED,OAAO,SAASE,YAAT,CAAsBC,GAAtB,EAAgC;AACnC,SAAOA,GAAG,YAAYV,WAAtB;AACH;AAGD;AACA;AACA;;AACA,OAAO,SAASK,cAAT,CAAwBM,MAAxB,EAAqC;AACxC,MAAIA,MAAM,CAACC,IAAX,EAAiB;AACb,UAAMT,cAAc,CAAC,KAAD,EAAQ;AACxBQ,MAAAA,MAAM,EAANA;AADwB,KAAR,CAApB;AAGH;AACD;AACJ;AACA;AACA;AACA;;;AACI,MAAI,OAAOA,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,WAAxC,EAAkD;AAC9CA,IAAAA,MAAM,GAAGA,MAAM,WAAf;AACH;;AACDX,EAAAA,WAAW,CAACW,MAAZ,CAAmBA,MAAnB;AACH;AAGD,OAAO,IAAME,OAAY,GAAGb,WAArB","sourcesContent":["/**\n * this handles the pouchdb-instance\n * to easy add modules and manipulate things\n * Adapters can be found here:\n * @link https://github.com/pouchdb/pouchdb/tree/master/packages/node_modules\n */\nimport PouchDBCore from 'pouchdb-core';\n\n// pouchdb-find\nimport PouchDBFind from 'pouchdb-find';\n\n/*\n// comment in to debug\nconst pouchdbDebug = require('pouchdb-debug');\nPouchDB.plugin(pouchdbDebug);\nPouchDB.debug.enable('*');\n*/\n\n\nimport {\n    newRxError,\n    newRxTypeError\n} from '../../rx-error';\nimport { addCustomEventsPluginToPouch } from './custom-events-plugin';\n\naddPouchPlugin(PouchDBFind);\naddCustomEventsPluginToPouch();\n\n\n/**\n * check if the given module is a leveldown-adapter\n * throws if not\n */\nexport function isLevelDown(adapter: any) {\n    if (!adapter || typeof adapter.super_ !== 'function') {\n        throw newRxError('UT4', {\n            adapter\n        });\n    }\n}\n\nexport function isInstanceOf(obj: any) {\n    return obj instanceof PouchDBCore;\n}\n\n\n/**\n * Add a pouchdb plugin to the pouchdb library.\n */\nexport function addPouchPlugin(plugin: any) {\n    if (plugin.rxdb) {\n        throw newRxTypeError('PL2', {\n            plugin\n        });\n    }\n    /**\n     * Pouchdb has confusing typings and modules.\n     * So we monkeypatch the plugin to use the default property\n     * when it was imported or packaged this way.\n     */\n    if (typeof plugin === 'object' && plugin.default) {\n        plugin = plugin.default;\n    }\n    PouchDBCore.plugin(plugin);\n}\n\n\nexport const PouchDB: any = PouchDBCore as any;\n"],"file":"pouch-db.js"}
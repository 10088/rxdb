{"version":3,"sources":["../../../../src/plugins/dev-mode/check-names.ts"],"names":["newRxError","newRxTypeError","isFolderPath","validCouchDBStringRegexStr","validCouchDBStringRegex","RegExp","validateDatabaseName","name","length","match","regex","givenName"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,cAArB,QAA2C,gBAA3C;AACA,SAASC,YAAT,QAA6B,YAA7B;AAEA,IAAMC,0BAA0B,GAAG,uBAAnC;AACA,IAAMC,uBAAuB,GAAG,IAAIC,MAAJ,CAAWF,0BAAX,CAAhC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,oBAAT,CAA8BC,IAA9B,EAAkD;AACrD,MACI,OAAOA,IAAP,KAAgB,QAAhB,IACAA,IAAI,CAACC,MAAL,KAAgB,CAFpB,EAGE;AACE,UAAMP,cAAc,CAAC,KAAD,EAAQ;AACxBM,MAAAA,IAAI,EAAJA;AADwB,KAAR,CAApB;AAGH,GARoD,CAWrD;;;AACA,MAAIL,YAAY,CAACK,IAAD,CAAhB,EAAwB;AACpB,WAAO,IAAP;AACH;;AAGD,MAAI,CAACA,IAAI,CAACE,KAAL,CAAWL,uBAAX,CAAL,EAA0C;AACtC,UAAMJ,UAAU,CAAC,KAAD,EAAQ;AACpBU,MAAAA,KAAK,EAAEP,0BADa;AAEpBQ,MAAAA,SAAS,EAAEJ;AAFS,KAAR,CAAhB;AAIH;;AAED,SAAO,IAAP;AACH","sourcesContent":["import { newRxError, newRxTypeError } from '../../rx-error';\nimport { isFolderPath } from '../../util';\n\nconst validCouchDBStringRegexStr = '^[a-z][_$a-z0-9\\\\-]*$';\nconst validCouchDBStringRegex = new RegExp(validCouchDBStringRegexStr);\n\n/**\n * Validates that a given string is ok to be used with couchdb-collection-names.\n * We only allow these strings as database- or collection names because it ensures\n * that you later do not get in troubble when you want to use the database together witch couchdb.\n *\n * @link https://docs.couchdb.org/en/stable/api/database/common.html\n * @link https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n * @throws  {Error}\n */\nexport function validateDatabaseName(name: string): true {\n    if (\n        typeof name !== 'string' ||\n        name.length === 0\n    ) {\n        throw newRxTypeError('UT1', {\n            name\n        });\n    }\n\n\n    // do not check, if foldername is given\n    if (isFolderPath(name)) {\n        return true;\n    }\n\n\n    if (!name.match(validCouchDBStringRegex)) {\n        throw newRxError('UT2', {\n            regex: validCouchDBStringRegexStr,\n            givenName: name,\n        });\n    }\n\n    return true;\n}\n"],"file":"check-names.js"}
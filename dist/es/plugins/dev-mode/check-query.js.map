{"version":3,"sources":["../../../../src/plugins/dev-mode/check-query.ts"],"names":["newRxTypeError","checkQuery","args","isPlainObject","Object","prototype","toString","call","queryObj","op","collection","name","validKeys","keys","forEach","key","includes"],"mappings":"AACA,SAASA,cAAT,QAA+B,gBAA/B;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAAwD;AAC3D,MAAMC,aAAa,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BL,IAAI,CAACM,QAApC,MAAkD,iBAAxE;;AACA,MAAI,CAACL,aAAL,EAAoB;AAChB,UAAMH,cAAc,CAAC,MAAD,EAAS;AACzBS,MAAAA,EAAE,EAAEP,IAAI,CAACO,EADgB;AAEzBC,MAAAA,UAAU,EAAER,IAAI,CAACQ,UAAL,CAAgBC,IAFH;AAGzBH,MAAAA,QAAQ,EAAEN,IAAI,CAACM;AAHU,KAAT,CAApB;AAKH;;AAED,MAAMI,SAA+B,GAAG,CACpC,UADoC,EAEpC,OAFoC,EAGpC,MAHoC,EAIpC,MAJoC,CAAxC;AAMAR,EAAAA,MAAM,CAACS,IAAP,CAAYX,IAAI,CAACM,QAAjB,EAA2BM,OAA3B,CAAmC,UAAAC,GAAG,EAAI;AACtC,QAAI,CAAEH,SAAD,CAAwBI,QAAxB,CAAiCD,GAAjC,CAAL,EAA4C;AACxC,YAAMf,cAAc,CAAC,MAAD,EAAS;AACzBS,QAAAA,EAAE,EAAEP,IAAI,CAACO,EADgB;AAEzBC,QAAAA,UAAU,EAAER,IAAI,CAACQ,UAAL,CAAgBC,IAFH;AAGzBH,QAAAA,QAAQ,EAAEN,IAAI,CAACM,QAHU;AAIzBO,QAAAA,GAAG,EAAHA;AAJyB,OAAT,CAApB;AAMH;AACJ,GATD;AAUH","sourcesContent":["import { RxPluginPreCreateRxQueryArgs, MangoQuery } from '../../types';\nimport { newRxTypeError } from '../../rx-error';\n\n/**\n * accidentially passing a non-valid object into the query params\n * is very hard to debug especially when queries are observed\n * This is why we do some checks here in dev-mode\n */\nexport function checkQuery(args: RxPluginPreCreateRxQueryArgs) {\n    const isPlainObject = Object.prototype.toString.call(args.queryObj) === '[object Object]';\n    if (!isPlainObject) {\n        throw newRxTypeError('QU11', {\n            op: args.op,\n            collection: args.collection.name,\n            queryObj: args.queryObj\n        });\n    }\n\n    const validKeys: (keyof MangoQuery)[] = [\n        'selector',\n        'limit',\n        'skip',\n        'sort'\n    ];\n    Object.keys(args.queryObj).forEach(key => {\n        if (!(validKeys as string[]).includes(key)) {\n            throw newRxTypeError('QU11', {\n                op: args.op,\n                collection: args.collection.name,\n                queryObj: args.queryObj,\n                key\n            });\n        }\n    });\n}\n"],"file":"check-query.js"}
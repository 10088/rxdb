{"version":3,"sources":["../../../../src/plugins/replication-graphql/helper.ts"],"names":["hash","GRAPHQL_REPLICATION_PLUGIN_IDENT","DEFAULT_MODIFIER","d","Promise","resolve","createRevisionForPulledDocument","endpointHash","doc","dataHash","ret","substring","wasRevisionfromPullReplication","revision","ending","endsWith"],"mappings":"AAAA,SACIA,IADJ,QAEO,YAFP;AAIA,OAAO,IAAMC,gCAAgC,GAAG,wBAAzC,C,CAEP;;AACA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,CAAD;AAAA,SAAYC,OAAO,CAACC,OAAR,CAAgBF,CAAhB,CAAZ;AAAA,CAAzB;AAEP;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,+BAAT,CACHC,YADG,EAEHC,GAFG,EAGL;AACE,MAAMC,QAAQ,GAAGT,IAAI,CAACQ,GAAD,CAArB;AAEA,MAAME,GAAG,GACLD,QAAQ,CAACE,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,IACAJ,YAAY,CAACI,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,CADA,GAEAV,gCAHJ;AAKA,SAAOS,GAAP;AACH;AAED,OAAO,SAASE,8BAAT,CACHL,YADG,EAEHM,QAFG,EAGL;AACE,MAAMC,MAAM,GAAGP,YAAY,CAACI,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,IAA+BV,gCAA9C;AACA,MAAMS,GAAG,GAAGG,QAAQ,CAACE,QAAT,CAAkBD,MAAlB,CAAZ;AACA,SAAOJ,GAAP;AACH","sourcesContent":["import {\n    hash\n} from '../../util';\n\nexport const GRAPHQL_REPLICATION_PLUGIN_IDENT = 'rxdbreplicationgraphql';\n\n// does nothing\nexport const DEFAULT_MODIFIER = (d: any) => Promise.resolve(d);\n\n/**\n * Returns a new revision key without the revision height.\n * The revision is crafted for the graphql replication\n * and contains the information that this document data was pulled\n * from the remote server and not saved by the client.\n */\nexport function createRevisionForPulledDocument(\n    endpointHash: string,\n    doc: any\n) {\n    const dataHash = hash(doc);\n\n    const ret =\n        dataHash.substring(0, 8) +\n        endpointHash.substring(0, 8) +\n        GRAPHQL_REPLICATION_PLUGIN_IDENT;\n\n    return ret;\n}\n\nexport function wasRevisionfromPullReplication(\n    endpointHash: string,\n    revision: string\n) {\n    const ending = endpointHash.substring(0, 8) + GRAPHQL_REPLICATION_PLUGIN_IDENT;\n    const ret = revision.endsWith(ending);\n    return ret;\n}\n"],"file":"helper.js"}
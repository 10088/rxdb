{"version":3,"sources":["../../src/rx-collection-helper.ts"],"names":["getDefaultRxDocumentMeta","fillPrimaryKey","createRxCollectionStorageInstance","rxDatabase","storageInstanceCreationParams","multiInstance","storage","createStorageInstance","fillObjectDataBeforeInsert","collection","data","useJson","schema","fillObjectWithDefaults","primaryPath","jsonSchema","_meta","hasOwnProperty","_deleted"],"mappings":"AAOA,SAASA,wBAAT,QAAyC,QAAzC;AACA,SACIC,cADJ,QAEO,oBAFP;AAIA;AACA;AACA;AACA;;AAkBA;AACA;AACA;AACA,WAAsBC,iCAAtB,YAAsBA,iCAAtB,CACIC,UADJ,EAEIC,6BAFJ;AAAA,MAGkF;AAC9EA,IAAAA,6BAA6B,CAACC,aAA9B,GAA8CF,UAAU,CAACE,aAAzD;AAD8E,2BAEhDF,UAAU,CAACG,OAAX,CAAmBC,qBAAnB,CAC1BH,6BAD0B,CAFgD;AAMjF,GATD;AAAA;AAAA;AAAA;AApBA,OAAO,SAASI,0BAAT,CACHC,UADG,EAEHC,IAFG,EAGA;AACH,MAAIC,OAAO,GAAGF,UAAU,CAACG,MAAX,CAAkBC,sBAAlB,CAAyCH,IAAzC,CAAd;AACAC,EAAAA,OAAO,GAAGV,cAAc,CACpBQ,UAAU,CAACG,MAAX,CAAkBE,WADE,EAEpBL,UAAU,CAACG,MAAX,CAAkBG,UAFE,EAGpBJ,OAHoB,CAAxB;AAKAA,EAAAA,OAAO,CAACK,KAAR,GAAgBhB,wBAAwB,EAAxC;;AACA,MAAI,CAACW,OAAO,CAACM,cAAR,CAAuB,UAAvB,CAAL,EAAyC;AACrCN,IAAAA,OAAO,CAACO,QAAR,GAAmB,KAAnB;AACH;;AACD,SAAOP,OAAP;AACH","sourcesContent":["import type {\n    RxCollection,\n    RxDatabase,\n    RxStorageInstance,\n    RxStorageInstanceCreationParams\n} from './types';\nimport { RxCollectionBase } from './rx-collection';\nimport { getDefaultRxDocumentMeta } from './util';\nimport {\n    fillPrimaryKey\n} from './rx-schema-helper';\n\n/**\n * fills in the default data.\n * This also clones the data.\n */\nexport function fillObjectDataBeforeInsert(\n    collection: RxCollection | RxCollectionBase<any>,\n    data: any\n): any {\n    let useJson = collection.schema.fillObjectWithDefaults(data);\n    useJson = fillPrimaryKey(\n        collection.schema.primaryPath,\n        collection.schema.jsonSchema,\n        useJson\n    );\n    useJson._meta = getDefaultRxDocumentMeta();\n    if (!useJson.hasOwnProperty('_deleted')) {\n        useJson._deleted = false;\n    }\n    return useJson;\n}\n\n/**\n * Creates the storage instances that are used internally in the collection\n */\nexport async function createRxCollectionStorageInstance<RxDocumentType, Internals, InstanceCreationOptions>(\n    rxDatabase: RxDatabase<{}, Internals, InstanceCreationOptions>,\n    storageInstanceCreationParams: RxStorageInstanceCreationParams<RxDocumentType, InstanceCreationOptions>\n): Promise<RxStorageInstance<RxDocumentType, Internals, InstanceCreationOptions>> {\n    storageInstanceCreationParams.multiInstance = rxDatabase.multiInstance;\n    const storageInstance = await rxDatabase.storage.createStorageInstance<RxDocumentType>(\n        storageInstanceCreationParams\n    );\n    return storageInstance;\n}\n"],"file":"rx-collection-helper.js"}
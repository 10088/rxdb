{"version":3,"sources":["../../../../src/plugins/replication-graphql/helper.ts"],"names":[],"mappings":";;;;;;;;;AAAA;;AAIO,IAAM,gCAAgC,GAAG,wBAAzC,C,CAEP;;;;AACO,IAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,CAAD;AAAA,SAAY,OAAO,CAAC,OAAR,CAAgB,CAAhB,CAAZ;AAAA,CAAzB;AAEP;AACA;AACA;AACA;AACA;AACA;;;;;AACO,SAAS,+BAAT,CACH,YADG,EAEH,GAFG,EAGL;AACE,MAAM,QAAQ,GAAG,gBAAK,GAAL,CAAjB;AAEA,MAAM,GAAG,GACL,QAAQ,CAAC,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,IACA,YAAY,CAAC,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,CADA,GAEA,gCAHJ;AAKA,SAAO,GAAP;AACH;;AAEM,SAAS,8BAAT,CACH,YADG,EAEH,QAFG,EAGL;AACE,MAAM,MAAM,GAAG,YAAY,CAAC,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,IAA+B,gCAA9C;AACA,MAAM,GAAG,GAAG,QAAQ,CAAC,QAAT,CAAkB,MAAlB,CAAZ;AACA,SAAO,GAAP;AACH","file":"helper.js","sourcesContent":["import {\n    hash\n} from '../../util';\n\nexport const GRAPHQL_REPLICATION_PLUGIN_IDENT = 'rxdbreplicationgraphql';\n\n// does nothing\nexport const DEFAULT_MODIFIER = (d: any) => Promise.resolve(d);\n\n/**\n * Returns a new revision key without the revision height.\n * The revision is crafted for the graphql replication\n * and contains the information that this document data was pulled\n * from the remote server and not saved by the client.\n */\nexport function createRevisionForPulledDocument(\n    endpointHash: string,\n    doc: any\n) {\n    const dataHash = hash(doc);\n\n    const ret =\n        dataHash.substring(0, 8) +\n        endpointHash.substring(0, 8) +\n        GRAPHQL_REPLICATION_PLUGIN_IDENT;\n\n    return ret;\n}\n\nexport function wasRevisionfromPullReplication(\n    endpointHash: string,\n    revision: string\n) {\n    const ending = endpointHash.substring(0, 8) + GRAPHQL_REPLICATION_PLUGIN_IDENT;\n    const ret = revision.endsWith(ending);\n    return ret;\n}\n"]}
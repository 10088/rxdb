{"version":3,"sources":["../../../../src/plugins/dev-mode/check-query.ts"],"names":[],"mappings":";;;;;;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS,UAAT,CAAoB,IAApB,EAAwD;AAC3D,MAAM,aAAa,GAAG,MAAM,CAAC,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,IAAI,CAAC,QAApC,MAAkD,iBAAxE;;AACA,MAAI,CAAC,aAAL,EAAoB;AAChB,UAAM,6BAAe,MAAf,EAAuB;AACzB,MAAA,EAAE,EAAE,IAAI,CAAC,EADgB;AAEzB,MAAA,UAAU,EAAE,IAAI,CAAC,UAAL,CAAgB,IAFH;AAGzB,MAAA,QAAQ,EAAE,IAAI,CAAC;AAHU,KAAvB,CAAN;AAKH;;AAED,MAAM,SAA+B,GAAG,CACpC,UADoC,EAEpC,OAFoC,EAGpC,MAHoC,EAIpC,MAJoC,CAAxC;AAMA,EAAA,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,QAAjB,EAA2B,OAA3B,CAAmC,UAAA,GAAG,EAAI;AACtC,QAAI,CAAE,SAAD,CAAwB,QAAxB,CAAiC,GAAjC,CAAL,EAA4C;AACxC,YAAM,6BAAe,MAAf,EAAuB;AACzB,QAAA,EAAE,EAAE,IAAI,CAAC,EADgB;AAEzB,QAAA,UAAU,EAAE,IAAI,CAAC,UAAL,CAAgB,IAFH;AAGzB,QAAA,QAAQ,EAAE,IAAI,CAAC,QAHU;AAIzB,QAAA,GAAG,EAAH;AAJyB,OAAvB,CAAN;AAMH;AACJ,GATD;AAUH","file":"check-query.js","sourcesContent":["import { RxPluginPreCreateRxQueryArgs, MangoQuery } from '../../types';\nimport { newRxTypeError } from '../../rx-error';\n\n/**\n * accidentially passing a non-valid object into the query params\n * is very hard to debug especially when queries are observed\n * This is why we do some checks here in dev-mode\n */\nexport function checkQuery(args: RxPluginPreCreateRxQueryArgs) {\n    const isPlainObject = Object.prototype.toString.call(args.queryObj) === '[object Object]';\n    if (!isPlainObject) {\n        throw newRxTypeError('QU11', {\n            op: args.op,\n            collection: args.collection.name,\n            queryObj: args.queryObj\n        });\n    }\n\n    const validKeys: (keyof MangoQuery)[] = [\n        'selector',\n        'limit',\n        'skip',\n        'sort'\n    ];\n    Object.keys(args.queryObj).forEach(key => {\n        if (!(validKeys as string[]).includes(key)) {\n            throw newRxTypeError('QU11', {\n                op: args.op,\n                collection: args.collection.name,\n                queryObj: args.queryObj,\n                key\n            });\n        }\n    });\n}\n"]}
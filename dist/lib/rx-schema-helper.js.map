{"version":3,"sources":["../../src/rx-schema-helper.ts"],"names":["getPseudoSchemaForVersion","version","primaryKey","pseudoSchema","type","properties","required","getSchemaByObjectPath","rxJsonSchema","path","usePath","replace","ret","objectPath","get"],"mappings":";;;;;;;;;;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACO,SAASA,yBAAT,CACHC,OADG,EAEHC,UAFG,EAGY;AAAA;;AACf,MAAMC,YAA6B,GAAG;AAClCF,IAAAA,OAAO,EAAPA,OADkC;AAElCG,IAAAA,IAAI,EAAE,QAF4B;AAGlCF,IAAAA,UAAU,EAAEA,UAHsB;AAIlCG,IAAAA,UAAU,iCACLH,UADK,IACQ;AACVE,MAAAA,IAAI,EAAE;AADI,KADR,cAJwB;AASlCE,IAAAA,QAAQ,EAAE,CAACJ,UAAD;AATwB,GAAtC;AAWA,SAAOC,YAAP;AACH;AAED;AACA;AACA;;;AACO,SAASI,qBAAT,CACHC,YADG,EAEHC,IAFG,EAGO;AACV,MAAIC,OAAe,GAAGD,IAAtB;AACAC,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAuB,cAAvB,CAAV;AACAD,EAAAA,OAAO,GAAG,gBAAgBA,OAA1B;AACAA,EAAAA,OAAO,GAAG,oBAASA,OAAT,CAAV;;AAEA,MAAME,GAAG,GAAGC,uBAAWC,GAAX,CAAeN,YAAf,EAA6BE,OAA7B,CAAZ;;AACA,SAAOE,GAAP;AACH","sourcesContent":["import objectPath from 'object-path';\nimport type { JsonSchema, RxJsonSchema, StringKeys } from './types';\nimport { trimDots } from './util';\n\n/**\n * Helper function to create a valid RxJsonSchema\n * with a given version.\n */\nexport function getPseudoSchemaForVersion<T = any>(\n    version: number,\n    primaryKey: StringKeys<T>\n): RxJsonSchema<T> {\n    const pseudoSchema: RxJsonSchema<T> = {\n        version,\n        type: 'object',\n        primaryKey: primaryKey as any,\n        properties: {\n            [primaryKey]: {\n                type: 'string'\n            }\n        } as any,\n        required: [primaryKey]\n    };\n    return pseudoSchema;\n}\n\n/**\n * Returns the sub-schema for a given path\n */\nexport function getSchemaByObjectPath<T = any>(\n    rxJsonSchema: RxJsonSchema<T>,\n    path: keyof T | string\n): JsonSchema {\n    let usePath: string = path as string;\n    usePath = usePath.replace(/\\./g, '.properties.');\n    usePath = 'properties.' + usePath;\n    usePath = trimDots(usePath);\n\n    const ret = objectPath.get(rxJsonSchema, usePath);\n    return ret;\n}\n"],"file":"rx-schema-helper.js"}
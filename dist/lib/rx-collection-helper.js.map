{"version":3,"sources":["../../src/rx-collection-helper.ts"],"names":["createRxCollectionStorageInstance","rxDatabase","storageInstanceCreationParams","multiInstance","storage","createStorageInstance","fillObjectDataBeforeInsert","collection","data","useJson","schema","fillObjectWithDefaults","primaryPath","jsonSchema","_meta","hasOwnProperty","_deleted"],"mappings":";;;;;;;;AAOA;;AACA;;AAyBA;AACA;AACA;IACsBA,iC,YAAAA,iC,CAClBC,U,EACAC,6B;MAC8E;AAC9EA,IAAAA,6BAA6B,CAACC,aAA9B,GAA8CF,UAAU,CAACE,aAAzD;AAD8E,2BAEhDF,UAAU,CAACG,OAAX,CAAmBC,qBAAnB,CAC1BH,6BAD0B,CAFgD;AAMjF,G;;;;;;;AAjCD;AACA;AACA;AACA;AACO,SAASI,0BAAT,CACHC,UADG,EAEHC,IAFG,EAGA;AACH,MAAIC,OAAO,GAAGF,UAAU,CAACG,MAAX,CAAkBC,sBAAlB,CAAyCH,IAAzC,CAAd;AACAC,EAAAA,OAAO,GAAG,oCACNF,UAAU,CAACG,MAAX,CAAkBE,WADZ,EAENL,UAAU,CAACG,MAAX,CAAkBG,UAFZ,EAGNJ,OAHM,CAAV;AAKAA,EAAAA,OAAO,CAACK,KAAR,GAAgB,qCAAhB;;AACA,MAAI,CAACL,OAAO,CAACM,cAAR,CAAuB,UAAvB,CAAL,EAAyC;AACrCN,IAAAA,OAAO,CAACO,QAAR,GAAmB,KAAnB;AACH;;AACD,SAAOP,OAAP;AACH","sourcesContent":["import type {\n    RxCollection,\n    RxDatabase,\n    RxStorageInstance,\n    RxStorageInstanceCreationParams\n} from './types';\nimport { RxCollectionBase } from './rx-collection';\nimport { getDefaultRxDocumentMeta } from './util';\nimport {\n    fillPrimaryKey\n} from './rx-schema-helper';\n\n/**\n * fills in the default data.\n * This also clones the data.\n */\nexport function fillObjectDataBeforeInsert(\n    collection: RxCollection | RxCollectionBase<any>,\n    data: any\n): any {\n    let useJson = collection.schema.fillObjectWithDefaults(data);\n    useJson = fillPrimaryKey(\n        collection.schema.primaryPath,\n        collection.schema.jsonSchema,\n        useJson\n    );\n    useJson._meta = getDefaultRxDocumentMeta();\n    if (!useJson.hasOwnProperty('_deleted')) {\n        useJson._deleted = false;\n    }\n    return useJson;\n}\n\n/**\n * Creates the storage instances that are used internally in the collection\n */\nexport async function createRxCollectionStorageInstance<RxDocumentType, Internals, InstanceCreationOptions>(\n    rxDatabase: RxDatabase<{}, Internals, InstanceCreationOptions>,\n    storageInstanceCreationParams: RxStorageInstanceCreationParams<RxDocumentType, InstanceCreationOptions>\n): Promise<RxStorageInstance<RxDocumentType, Internals, InstanceCreationOptions>> {\n    storageInstanceCreationParams.multiInstance = rxDatabase.multiInstance;\n    const storageInstance = await rxDatabase.storage.createStorageInstance<RxDocumentType>(\n        storageInstanceCreationParams\n    );\n    return storageInstance;\n}\n"],"file":"rx-collection-helper.js"}